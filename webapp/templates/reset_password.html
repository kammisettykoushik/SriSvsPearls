{% extends 'base.html' %}
{% block content %}
{% include 'mainheader.html' %}
<div class="container mt-4 mb-3" style="font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; background-color: #f8e6d6; width: 50%; padding-bottom: 3px; border: 1px solid #033F3D;border-radius: 50px;">
    <div class="form-container">
        <h4 style="text-align: center;font-size: 50px;padding-top: 20px;color: white;">Reset Password</h4>
        <form method="POST">
            {% csrf_token %}

            <div class="input-group mb-4 mb-3 position-relative">
                <span class="input-group-text border-0 bg-white" style="padding-right: 10px;">
                    <i class="fa fa-lock" style="color: #6c757d;"></i>
                </span>
                {{ form.new_password1 }}
                <i class="fa fa-eye position-absolute" id="togglePassword1" style="right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;" onclick="togglePasswordVisibility('id_new_password1', 'togglePassword1')"></i>
            </div>
            {{ form.new_password1.help_text|safe }}

            {% for error in form.new_password1.errors %}
                <div class="alert alert-danger">{{ error }}</div>
            {% endfor %}


            <div class="input-group mb-4 mb-3 position-relative">
                <span class="input-group-text border-0 bg-white" style="padding-right: 10px;">
                    <i class="fa fa-lock" style="color: #6c757d;"></i>
                </span>
                {{ form.new_password2 }}
                <i class="fa fa-eye position-absolute" id="togglePassword2" style="right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;" onclick="togglePasswordVisibility('id_new_password2', 'togglePassword2')"></i>
            </div>
             {{ form.new_password2.help_text|safe }}

            {% for error in form.new_password2.errors %}
                <div class="alert alert-danger">{{ error }}</div>
            {% endfor %}

            <div class="d-flex justify-content-center mt-4">
                <button class="btn" style="background-color: skyblue; color:white;width: 150px;">
                    <b>Reset Password</b>
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    function togglePasswordVisibility(inputId, toggleIconId) {
        const passwordField = document.getElementById(inputId);
        const toggleIcon = document.getElementById(toggleIconId);

        // Check if the element exists before trying to access it
        if (!passwordField || !toggleIcon) {
            console.error('Password field or toggle icon not found');
            return;
        }

        // Toggle between password and text types
        if (passwordField.type === "password") {
            passwordField.type = "text";
            toggleIcon.classList.remove("fa-eye");
            toggleIcon.classList.add("fa-eye-slash");
        } else {
            passwordField.type = "password";
            toggleIcon.classList.remove("fa-eye-slash");
            toggleIcon.classList.add("fa-eye");
        }
    }
</script>

{% endblock %}
